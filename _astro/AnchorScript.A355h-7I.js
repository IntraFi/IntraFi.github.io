import{g as E}from"./preact.module.dOkjm3yY.js";import{p as g}from"./hooks.module.obzsRR2F.js";import{u as y}from"./jsxRuntime.module.Jvx7hqTl.js";const h=64,A=h+16,C=h-1;let i;const _=({isSection:a=!1})=>(g(()=>{const f=document.querySelectorAll(`.anchorContent :is(${a?"section":"h1, h2, h3, h4, h5, h6"})`),c=Array.from(f).map(e=>document.getElementById(e.getAttribute("id")||"")).filter(e=>e!=null);function p(e){const t=e.getBoundingClientRect();return a?t.top>=0||t.bottom-h>=0:t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}function s(e){const t=document.querySelectorAll(".anchorGroup a.tocAnchorLinks");let n=[];t.forEach(o=>{o.querySelector("span")?.classList.add("opacity-40"),o.classList.remove("text-primary"),o.hash!==""&&o.hash.replace("#","")===e&&n.push(o)}),n.length>0&&n.forEach(o=>{o.classList.add("text-primary"),o.querySelector("span")?.classList.remove("opacity-40")})}function d(){if(!c.some(t=>{const n=p(t);return n&&s(t.id),n})){let t;c.forEach(n=>{const o=n.getBoundingClientRect();(t===void 0||o.bottom<0&&t.rectBottom<o.bottom)&&(t={id:n.id,rectBottom:o.bottom})}),t!==void 0&&s(t.id)}}function T(){window.location.hash!==""?c.some(e=>{const t=window.location.hash.replace("#","")===e.id;return t&&s(e.id),t}):d()}function S(){document.querySelectorAll(".anchorGroup a.tocAnchorLinks, .anchorContent a").forEach(e=>{e.addEventListener("click",t=>{const n=new URL(e.href);if(window.location.pathname!==n.pathname||e.hash==="")return;t.preventDefault();const o=e.hash;if(!c.some(l=>o.replace("#","")===l.id))return;const m=document.querySelector(`.anchorContent ${o}`);if(m){const l=m.offsetTop;window.scrollTo({top:l-(a?C:A),behavior:"smooth"}),history.replaceState({},document.title,window.location.pathname+window.location.search+o);const r=document.getElementById("layout-sidebar");r&&r.checked&&r.click()}})})}function w(){window.addEventListener("scroll",u)}function u(){i!==void 0&&clearTimeout(i),i=setTimeout(()=>d(),100)}return T(),S(),w(),()=>{i!==void 0&&clearTimeout(i),window.removeEventListener("scroll",u)}},[]),y(E,{}));export{_ as default};
