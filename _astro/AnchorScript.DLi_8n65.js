import{g as S}from"./preact.module.dOkjm3yY.js";import{p as w}from"./hooks.module.obzsRR2F.js";import{u as A}from"./jsxRuntime.module.Jvx7hqTl.js";const d=1280,l=64,E=l+16,O=l-1,b=({isSection:c=!1})=>(w(()=>{const u=document.querySelectorAll(`.anchorContent :is(${c?"section":"h1, h2, h3, h4, h5, h6"})`),i=Array.from(u).map(e=>document.getElementById(e.getAttribute("id")||"")).filter(e=>e!=null);function m(e){const t=e.getBoundingClientRect();return c?t.top>=0||t.bottom-l>=0:t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}function r(e){const t=document.querySelectorAll(".anchorGroup a.tocAnchorLinks");let o;t.forEach(n=>{n.querySelector("span")?.classList.add("opacity-40"),n.classList.remove("text-primary"),n.hash.replace("#","")===e&&(o=n)}),o!==void 0&&(o.classList.add("text-primary"),o.querySelector("span")?.classList.remove("opacity-40"))}function a(){if(window.innerWidth<d)return;if(!i.some(t=>{const o=m(t);return o&&r(t.id),o})){let t;i.forEach(o=>{const n=o.getBoundingClientRect();(t===void 0||n.bottom<0&&t.rectBottom<n.bottom)&&(t={id:o.id,rectBottom:n.bottom})}),t!==void 0&&r(t.id)}}function f(){window.innerWidth<d||(window.location.hash!==""?i.some(e=>{const t=window.location.hash.replace("#","")===e.id;return t&&r(e.id),t}):a())}function p(){document.querySelectorAll(".tocAnchorLinks").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.hash;if(!i.some(s=>o.replace("#","")===s.id))return;const h=document.querySelector(`.anchorContent ${o}`);if(h){const s=h.offsetTop;window.scrollTo({top:s-(c?O:E),behavior:"smooth"}),history.replaceState({},document.title,window.location.pathname+window.location.search+o)}})})}function T(){let e;window.addEventListener("scroll",()=>{e!==void 0&&clearTimeout(e),e=setTimeout(()=>a(),100)})}f(),p(),T()},[]),A(S,{}));export{b as default};
